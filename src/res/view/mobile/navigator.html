@%'insert/directories.html'@

<div id="music_holder">
   <table id="music_list">
   
   </table>
</div>

<script>
  var dl = [@model({'title':'@~element.getAttribute*(Title)*@',
	  'path':'@^element.getAttribute*(MediaPath)*@',
	  'artist':'@~element.getAttribute*(Artist)*@',
	  'album':'@~element.getAttribute*(Album)*@',
	  'genre':'@~element.getAttribute*(Genre)*@',
	  'year':'@~element.getAttribute*(Year)*@',
	  'track':'@~element.getAttribute*(Track)*@'},)@
            ];
  updateDirectories();
  var table=getElement('music_list');
  for (var i=0; dl[i]; i++) {
     var row=table.insertRow(i);
      var cell1=row.insertCell(0);
      cell1.innerHTML = '<strong>'+dl[i].title+'</strong><br/>'+dl[i].artist+'<br/>'+dl[i].album+'<br/>'+dl[i].year+'&nbsp;<i>'+dl[i].genre+'</i>';
      cell1.onclick = clousurePlaymenu(i);
      cell1.className = 'play_tag';
  }
  
  function clousurePlaymenu(i) {
	  return function() {
		  makeGenericAjaxCall('Player', 'playPath=' + encodeURIComponent(dl[i].path),
					true, function(res) {
						
					}, function(err) {

					});
		  //alert('Play '+dl[i].path);
	  }
  }
</script>
